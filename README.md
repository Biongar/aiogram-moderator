# Chat Moderator Bot V0.1.0

## Стэк

- Aiogram
- Asyncio
- Alembic
- PostgreSQL
- Sqlalchemy

## Описание

Бот модератор, на данный момент часть функционала еще находится в разработке...

Бот просматривает все входящие сообщения, а так же добавляет пользователей в базу данных, если их там еще нет. Найдя в сообщении слово которое записано в файле "swear_words.txt" удаляет сообщение, оповещает пользователя о нарушении правил и добавляет ему + 1 к счетчику нарушения правил. В случае, если счетчик доходит до 3 банит пользователя и начинает удалять все входящие от него сообщения. В личные сообщения писать боту можно только если у вас есть права администратора(смотреть Локальный запуск, раздел **Права администратора**). В личный сообщениях есть возможность отправлять боту команды, в данный момент можно просмотреть список пользователей, список забаненых пользователей, забанить и разбанить пользователя, дать права администратора другому пользователю.

## Локальный запуск

### Создание БД PostgreSQL

> sudo -u postgres psql

``` sql
CREATE USER telegram_user WITH PASSWORD '1234';
CREATE DATABASE telegram_db WITH OWNER telegram_user;
```

### Виртуальное окружение
> python3.10 -m venv venv;
> source venv/bin/activate;
> pip install -U pip;
> pip install -r requirements.txt;

### Создание файла .env

Создать в корне проекта файл ".env" и в нем прописать все по примеру из файла "env_example.txt", 
подставив туда свои значения

### Миграции

> alembic upgrade head

### Настроить слова

В файле "swear_words.txt" прописать как указано в файле
слова, которые запрещены в вашей группе

### Добавить бота в группу с правами администратора

### Права администратора
> python main.py createadmin

### Запуск бота
> python main.py runserver